

	полностью закончил admin\core\plushka и admin\core\core











TODO:
- исключения: sql-запрос, 404я ошибка, отправлка письмо, plushka::url для CGI,

- просканировать админку и вычистить все $_GET['corePath']
- исправить пути к контроллерам и виджетам в установщике модулей: установка и удаление
- Удалить везде из пространств имён поставщика (plushka). Проверить совместимость с PSR.
- Обновить модуль payment в соответствии с сайтом sexkiev.xyz
- Искать все file_exits: если это класс, то, возможно, автозагрузка справится и с этим.
- Убрать лишнюю вложенность, пусть репозиторий сразу находится в WWW.
- в plushka::config добавить обработку 'admin' для включения файлов секции admin - сейчас вообще не реализовано
- в core::url plushka::link, plushka::linkPublic добавить исключение на случай, если для cgi нет настройки домена
- в plushka::user, plushka::userCore, plushka::userId, plushka::userGroup поменять местами UserCore и user, т.к. в большинстве случаев две проверки.
- в admin\plushka::cache добавить кеширование для случая admin.
- проверить используется ли вообще динамическая модель
- в admin\plushka::Model добавить проверку пути admin.
- выбрасывать исключение если файла локализации нет (core::language);
- просканировать в админке вызовы plushka::user(), plushka::userCore(), plushka::userGroup(), plushka::userId() - они теперь возвращают подменённого пользователя.
- переименовать userCore() в userReal().
- нужно либо везде использовать linkAdmin() либо не использовать его нигде. Это же касается linkPublic.
- нужно научить админку понимать подмену url и исправить \admin\plushka::redirectPublic.

Имена таблиц СУБД MySQL изменены к нижнему регистру с символом подчёркивания в роли разделителя.

Реализованы пространства имён.

Базовый класс core переименован в plushka, но по прежнему расположен в глобальном пространстве имён.

Первая буква имён всех классов, а также имён соответствующих файлов переименованы к верхнему регистру.

Класс admin\core теперь унаследован от \core.

Глобальный указатель на контроллер перенесён из controller::$self в plushka::$controller.

Имена классов контроллеров изменены, теперь в таком формате: (Name)Controller, например "ArticleController". Имена файлов контроллеров также изменены и соответствуют имени класса: ArticleController.php.

Имена классов виджетов изменены, теперь в таком формате: (Name)Widget, например "AdminWidget". Имена файлов виджетов также изменены и соответствуют имени класса: AdminWidget.php.

Исключён параметр $active конструктора класса контроллера, используйте $_GET['corePath'][1] вместо этого.

Имена CSS-классов виджетов изменены к верхнему регустрку: "widgetMenu", вместо "widgetmenu".

$_GET['corePath'] теперь определяется в скрипте инициализации, а не в .htaccess.

В административной части plushka::user(), plushka::userId(), plushka::userGroup() теперь возвращают информацию подменённого пользователя, если включён режим подмены пользователя. Используйте plushka::userCore(), чтобы гарантированно получить администратора.

Из контроллера админки убран метод scriptAdmin(), используйте controller::js('admin/...') вместо него.

controller::style() переименован в controller::css().

В административной части больше не используется $_GET['corePath'], вместо него следует использовать $_GET['controller'] и $_GET['action'].

Функция core::userCore() переименована в plushka::userReal(), в сессии переменная userCore также переименована в userReal.